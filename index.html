<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JSAL Image Resizer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>
<body>
  <div class="app">

    <header class="app-header">
      <div class="app-icon">
        <i data-lucide="layout-dashboard" width="16" height="16" stroke-width="1.8"></i>
      </div>
      <div class="header-text">
        <h1>JSAL Image Resizer</h1>
        <p class="app-subtitle">Resize and export images in bulk</p>
      </div>
      <button class="theme-toggle" id="themeToggle" title="Toggle light/dark mode">
        <i class="icon-moon" data-lucide="moon" width="14" height="14" stroke-width="2"></i>
        <i class="icon-sun"  data-lucide="sun"  width="14" height="14" stroke-width="2"></i>
      </button>
    </header>

    <div class="steps">
      <div class="step active" id="step1">
        <div class="step-track"></div>
        <span class="step-label">Size</span>
      </div>
      <div class="step" id="step2">
        <div class="step-track"></div>
        <span class="step-label">Load</span>
      </div>
      <div class="step" id="step3">
        <div class="step-track"></div>
        <span class="step-label">Export</span>
      </div>
    </div>

    <p class="section-label">Output size</p>

    <!-- To add a preset: copy a seg-btn and set data-size="WIDTHxHEIGHT" -->
    <div class="segment-group" role="group" aria-label="Preset sizes">
      <button class="seg-btn active" data-size="1200x628">
        <span class="seg-label">1200 × 628</span>
        <span class="seg-hint">LP Default</span>
      </button>
      <button class="seg-btn" data-size="640x420">
        <span class="seg-label">640 × 420</span>
        <span class="seg-hint">SayNetwork</span>
      </button>
    </div>

    <div class="custom-row">
      <div class="input-group" id="cwGroup">
        <label for="cw">W</label>
        <input type="number" id="cw" placeholder="1920" min="32" max="20000" />
      </div>
      <div class="input-sep">×</div>
      <div class="input-group" id="chGroup">
        <label for="ch">H</label>
        <input type="number" id="ch" placeholder="1080" min="32" max="20000" />
      </div>
      <button class="btn-apply" id="customResize">Apply</button>
    </div>

    <!-- Quality maps to JPEG compression: 0.7 / 0.85 / 0.92 -->
    <div class="quality-row">
      <span class="quality-label">Quality</span>
      <div class="quality-track">
        <button class="quality-btn" data-quality="0.7">Low</button>
        <button class="quality-btn" data-quality="0.85">Med</button>
        <button class="quality-btn active" data-quality="0.92">High</button>
      </div>
      <span class="quality-hint" id="qualityHint">Sharp output, larger file size</span>
    </div>

    <div class="divider"></div>

    <p class="section-label">Load images</p>

    <div id="drop" class="drop-zone">
      <div class="drop-icon">
        <i data-lucide="upload" width="18" height="18" stroke-width="1.6"></i>
      </div>
      <div class="drop-text">
        <p class="drop-title">Drop images here</p>
        <p class="drop-sub">or click to browse your files</p>
      </div>
    </div>

    <input type="file" id="file" multiple accept="image/*" hidden />

    <!-- Shown when images are already loaded and new ones are dropped in -->
    <div class="load-choice" id="loadChoice" style="display:none;">
      <span class="load-choice-msg" id="loadChoiceMsg"></span>
      <div class="load-choice-btns">
        <button class="btn-choice btn-choice-replace" id="choiceReplace">Replace</button>
        <button class="btn-choice btn-choice-add" id="choiceAdd">Add</button>
        <button class="btn-choice btn-choice-cancel" id="choiceCancel">Cancel</button>
      </div>
    </div>

    <div class="divider"></div>

    <p class="section-label">Export</p>

    <div class="toolbar">
      <button class="btn-primary btn-accent" id="download" disabled>
        <i data-lucide="download" width="13" height="13" stroke-width="2.2"></i>
        <span id="downloadLabel">Download All</span>
      </button>
      <span class="toolbar-hint" id="kbdHint"></span>
      <button class="btn-ghost btn-danger" id="clear">
        <i data-lucide="trash-2" width="13" height="13" stroke-width="2"></i>
        Clear
      </button>
    </div>

    <div class="status-bar" id="status">
      <span class="status-dot" id="statusDot"></span>
      <span id="statusText">Choose a size, then load your images.</span>
    </div>

    <div class="canvas-wrap">
      <div class="canvas-empty" id="canvasEmpty">
        <i data-lucide="image" width="28" height="28" stroke-width="1.2" class="canvas-empty-icon"></i>
        <span>No preview yet</span>
      </div>
      <canvas id="out"></canvas>
      <div class="canvas-badge" id="canvasBadge"></div>
    </div>

    <div class="grid-header" id="gridHeader" style="display:none;">
      <span class="grid-title">Loaded images</span>
      <span class="grid-hint">
        <i data-lucide="info" width="10" height="10" stroke-width="2.5"></i>
        Click to preview &middot; Save downloads
      </span>
    </div>

    <div id="previewGrid" class="preview-grid"></div>

  </div>

  <!-- Initialise Lucide — converts all data-lucide tags into SVGs -->
  <script>lucide.createIcons();</script>
  <script src="script.js"></script>
</body>
</html>
