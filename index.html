<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image Resizer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">

    <header class="app-header">
      <div class="app-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="18" height="18" rx="3"/>
          <path d="M3 9h18M9 21V9"/>
        </svg>
      </div>
      <div class="header-text">
        <h1>Image Resizer</h1>
        <p class="app-subtitle">Resize and export images in bulk</p>
      </div>
      <button class="theme-toggle" id="themeToggle" title="Toggle light/dark mode">
        <svg class="icon-moon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
        <svg class="icon-sun" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
      </button>
    </header>

    <div class="steps">
      <div class="step active" id="step1">
        <div class="step-track"></div>
        <span class="step-label">Size</span>
      </div>
      <div class="step" id="step2">
        <div class="step-track"></div>
        <span class="step-label">Load</span>
      </div>
      <div class="step" id="step3">
        <div class="step-track"></div>
        <span class="step-label">Export</span>
      </div>
    </div>

    <p class="section-label">Output size</p>

    <!-- To add a preset: copy a seg-btn and set data-size="WIDTHxHEIGHT" -->
    <div class="segment-group" role="group" aria-label="Preset sizes">
      <button class="seg-btn active" data-size="1200x628">
        <span class="seg-label">1200 × 628</span>
        <span class="seg-hint">LP Default</span>
      </button>
      <button class="seg-btn" data-size="640x420">
        <span class="seg-label">640 × 420</span>
        <span class="seg-hint">SayNetwork</span>
      </button>
    </div>

    <div class="custom-row">
      <div class="input-group" id="cwGroup">
        <label for="cw">W</label>
        <input type="number" id="cw" placeholder="1920" min="32" max="20000" />
      </div>
      <div class="input-sep">×</div>
      <div class="input-group" id="chGroup">
        <label for="ch">H</label>
        <input type="number" id="ch" placeholder="1080" min="32" max="20000" />
      </div>
      <button class="btn-apply" id="customResize">Apply</button>
    </div>

    <!-- Quality maps to JPEG compression: 0.7 / 0.85 / 0.92 -->
    <div class="quality-row">
      <span class="quality-label">Quality</span>
      <div class="quality-track">
        <button class="quality-btn" data-quality="0.7">Low</button>
        <button class="quality-btn" data-quality="0.85">Med</button>
        <button class="quality-btn active" data-quality="0.92">High</button>
      </div>
      <span class="quality-hint" id="qualityHint">Sharp output, larger file size</span>
    </div>

    <div class="divider"></div>

    <p class="section-label">Load images</p>

    <div id="drop" class="drop-zone">
      <div class="drop-icon">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
      </div>
      <div class="drop-text">
        <p class="drop-title">Drop images here</p>
        <p class="drop-sub">or click to browse your files</p>
      </div>
    </div>

    <input type="file" id="file" multiple accept="image/*" hidden />

    <!-- Shown when images are already loaded and new ones are dropped in -->
    <div class="load-choice" id="loadChoice" style="display:none;">
      <span class="load-choice-msg" id="loadChoiceMsg"></span>
      <div class="load-choice-btns">
        <button class="btn-choice btn-choice-replace" id="choiceReplace">Replace</button>
        <button class="btn-choice btn-choice-add" id="choiceAdd">Add</button>
        <button class="btn-choice btn-choice-cancel" id="choiceCancel">Cancel</button>
      </div>
    </div>

    <div class="divider"></div>

    <p class="section-label">Export</p>

    <div class="toolbar">
      <button class="btn-primary btn-accent" id="download" disabled>
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        <span id="downloadLabel">Download All</span>
      </button>
      <span class="toolbar-hint" id="kbdHint"></span>
      <button class="btn-ghost btn-danger" id="clear">
        <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="3 6 5 6 21 6"/>
          <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
          <path d="M10 11v6M14 11v6"/>
          <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/>
        </svg>
        Clear
      </button>
    </div>

    <div class="status-bar" id="status">
      <span class="status-dot" id="statusDot"></span>
      <span id="statusText">Choose a size, then load your images.</span>
    </div>

    <div class="canvas-wrap">
      <div class="canvas-empty" id="canvasEmpty">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" opacity="0.35">
          <rect x="3" y="3" width="18" height="18" rx="2"/>
          <circle cx="8.5" cy="8.5" r="1.5"/>
          <polyline points="21 15 16 10 5 21"/>
        </svg>
        <span>No preview yet</span>
      </div>
      <canvas id="out"></canvas>
      <div class="canvas-badge" id="canvasBadge"></div>
    </div>

    <div class="grid-header" id="gridHeader" style="display:none;">
      <span class="grid-title">Loaded images</span>
      <span class="grid-hint">
        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <line x1="12" y1="8" x2="12" y2="12"/>
          <line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
        Click to preview &middot; Save downloads
      </span>
    </div>

    <div id="previewGrid" class="preview-grid"></div>

  </div>

  <script src="script.js"></script>
</body>
</html>
